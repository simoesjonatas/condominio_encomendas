{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}

<h3 class="mb-4"><i class="bi bi-speedometer2"></i> Dashboard</h3>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- BIG NUMBERS -->
<div class="row mb-4">
    <div class="col-md-4 mb-3">
        <div class="card text-center p-4 shadow-sm">
            <h6 class="text-muted mb-1">Recebidas Hoje</h6>
            <h2 class="display-5 fw-bold text-primary">{{ recebidas_hoje }}</h2>
        </div>
    </div>

    <div class="col-md-4 mb-3">
        <div class="card text-center p-4 shadow-sm">
            <h6 class="text-muted mb-1">Pendentes no total</h6>
            <h2 class="display-5 fw-bold text-warning">{{ pendentes_total }}</h2>
        </div>
    </div>

    <div class="col-md-4 mb-3">
        <div class="card text-center p-4 shadow-sm">
            <h6 class="text-muted mb-1">Entregues Hoje</h6>
            <h2 class="display-5 fw-bold text-success">{{ entregues_hoje }}</h2>
        </div>
    </div>
</div>


<!-- GRÁFICO DE RECEBIDAS -->
<div class="card p-3 shadow-sm mb-4">
    <h5 class="text-center mb-3">Encomendas Recebidas – Últimos 7 dias</h5>
    <canvas id="graficoRecebidas"></canvas>
</div>

<!-- GRÁFICO DE ENTREGUES -->
<div class="card p-3 shadow-sm">
    <h5 class="text-center mb-3">Encomendas Entregues – Últimos 7 dias</h5>
    <canvas id="graficoEntregues"></canvas>
</div>


<script>
// --------------------- GRÁFICO RECEBIDAS ------------------------
new Chart(document.getElementById('graficoRecebidas'), {
    type: 'line',
    data: {
        labels: {{ recebidas_labels|safe }},
        datasets: [{
            label: 'Recebidas',
            data: {{ recebidas_totais|safe }},
            borderColor: '#0d6efd',
            backgroundColor: 'rgba(13, 110, 253, 0.2)',
            tension: 0.3,
            fill: true
        }]
    },
});

// --------------------- GRÁFICO ENTREGUES ------------------------
new Chart(document.getElementById('graficoEntregues'), {
    type: 'line',
    data: {
        labels: {{ entregues_labels|safe }},
        datasets: [{
            label: 'Entregues',
            data: {{ entregues_totais|safe }},
            borderColor: '#198754',
            backgroundColor: 'rgba(25, 135, 84, 0.2)',
            tension: 0.3,
            fill: true
        }]
    },
});
</script>

{% endblock %}
